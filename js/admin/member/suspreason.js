function suspend_reasons_list(b){try{if(b){$.each(b,function(d,e){if(d=="ppage"&&!isNaN(e)){per_page=e;current_page=1}else{if(d=="cpage"){current_page=(e>0)?e:1}else{if(d=="ord"){sort_by=e;sort_how=(sort_how=="asc")?"desc":"asc"}}}return})}var c={cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how};setPagerParams({cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how});load_panel(base_url+"member/suspend_reasons_list",c)}catch(a){_sys_error("suspreason:suspend_reasons_list","Generates suspend reasons list",a)}return true}function after_add_suspreason_success(c){msg=c;after_panel_load=after_panel_loaded;try{var b={cpage:current_page,ppage:per_page};load_panel(base_url+"member/suspend_reasons_list",b)}catch(a){_sys_error("suspreason:after_add_suspreason_success","Getting pager params",a)}return}function after_add_suspreason_error(a){try{if(a!=""){_error_panel_show(a)}}catch(b){_sys_error("suspreason:after_add_suspreason_error","Shows error after adding Suspend Reason",b)}return}function add_suspend_reason(){try{var c=$("#sr_name").val();var b=$("#sr_descr").val();var a=$("#sr_act").val();var f={name:c,descr:b,action:a};if(a=="add"){_msg_panel_hide();_error_panel_hide();if(_validate_suspreason_fields(f)){on_post_success=after_add_suspreason_success;on_post_error=after_add_suspreason_error;load_panel(base_url+"member/suspend_reason_add",f)}}else{load_panel(base_url+"member/suspend_reason_add",f)}}catch(d){_sys_error("suspreason:add_suspend_reason","Getting fields values for adding Suspend Reason",d)}return}function after_edit_suspreason_success(c){try{if(c!=""){msg=c;after_panel_load=after_panel_loaded}var b={cpage:current_page,ppage:per_page};load_panel(base_url+"member/suspend_reasons_list",b)}catch(a){_sys_error("suspreason:after_edit_suspreason_success","Getting pager params",a)}return}function after_edit_suspreason_error(a){try{if(a!=""){_error_panel_show(a)}}catch(b){_sys_error("suspreason:after_edit_suspreason_error","Shows error after adding Suspend Reason",b)}return}function edit_suspend_reason(b){try{if(parseInt(b)<1){_error_panel_show("Error: ID is invalid");return false}var d=$("#sr_name").val();var c=$("#sr_descr").val();var a=$("#sr_act").val();var g={id:b,name:d,descr:c,action:a};if(a=="edit"){if(_validate_suspreason_fields(g)){on_post_success=after_edit_suspreason_success;on_post_error=after_edit_suspreason_error;load_panel(base_url+"member/suspend_reason_edit",g)}}else{load_panel(base_url+"member/suspend_reason_edit",g)}}catch(f){_sys_error("suspreason:edit_suspend_reason","Getting fields values for updating Suspend Reason",f)}return}function after_delete_suspreason_success(c){msg=c;after_panel_load=after_panel_loaded;_msg_panel_hide();_error_panel_hide();try{var b={cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how};load_panel(base_url+"member/suspend_reasons_list",b)}catch(a){_sys_error("suspreason:after_delete_suspreason_success","Loading Suspend Reason list after delete",a)}}function after_delete_suspreason_error(a){if(a!=""){_msg_panel_hide();_error_panel_show(a)}}function delete_suspend_reason(a){try{if(parseInt(a)>0){var b=$("#delete_question").text();if(confirm(b)){var d={id:a};on_post_success=after_delete_suspreason_success;on_post_error=after_delete_suspreason_error;load_panel(base_url+"member/suspend_reason_delete/",d)}}}catch(c){_sys_error("suspreason:delete_suspreason","Checks suspend reason id before delete",c)}}function _validate_suspreason_fields(b){var c=true;try{$("div#error_panel").children(".box_err").hide();$.each(b,function(d,e){if(d=="name"){if(e==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}if(!check_max_len(e,254)){$("#jsvalid_error_name_toolong").show();$("#error_panel").show();c=false;return}}else{if(d=="descr"){if(e==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}if(!check_max_len(e,65534)){$("#jsvalid_error_description_toolong").show();$("#error_panel").show();c=false;return}}}})}catch(a){_sys_error("suspreason:validate_suspend_reason_fields","Suspend reason add,edit form fields",a)}return c};
