var validator;function myOnPasswordSave(c){displayMessageEx(false,false,false);displayMessageEx(false,true,false);validator=new FormValidator();var a=$("table.settings").find(":input");a.each(function(){validator.add($(this).attr("name"))});if(validator.checkAll()){var b={action:"save"};b.id=c;var a=validator.getItems();for(key in a){if(typeof(a[key])!="function"){b[key]=a[key]}}on_post_error=function(e){var d=getTempVarsSet(false,e);displayMessageEx(d,true)};on_post_success=function(e){var d=getTempVarsSet(false,e);displayMessageEx(d)};load_panel(base_url+"member/edit_member_pwd",b,{"0":base_url+"js/admin/init.js"})}}function after_load_change_pswd_form_success(b){try{_change_accnt_panel_tab("tab_change_pswd");$("#account_panel").html(b)}catch(a){_sys_error("change_pswd:after_load_change_pswd_form_success","Shows the member form for password changing",a)}}function load_change_pswd_form(){try{var a=$("#mbr_id").val();if(a>0){var c={id:a};on_post_success=after_load_change_pswd_form_success;load_panel(base_url+"member/edit_member_pwd",c);return}}catch(b){_sys_error("change_pswd:load_change_pswd_form","Loads the member change password form",b)}}function after_update_password_success(a){_error_panel_hide();_msg_panel_show(a)}function after_update_password_error(a){_msg_panel_hide();if(a!=""){_error_panel_show(a)}}function update_password(){try{var c=$("#mbr_id").val();if(c>0){var d="0";if($("#mbr_is_gen_pass").attr("checked")==true){d="1"}else{var i=$("#mbr_password1").val();var g=$("#mbr_password2").val();if(i==""||g==""){$("#msg_panel").hide();$("#jsvalid_error_fields_empty").show();$("#error_panel").show();return}if(i!=g){$("#msg_panel").hide();$("#jsvalid_error_passwords_coincidence").show();$("#error_panel").show();return}var a={password1:i,password2:g}}var b={is_gen_pass:d};if(a){var h=jQuery.extend(b,a)}else{var h=b}var h=jQuery.extend(h,{id:c,action:"update"});on_post_success=after_update_password_success;on_post_error=after_update_password_error;load_panel(base_url+"member/edit_member_pwd",h)}}catch(f){_sys_error("change_pswd:update_password","Prepares password params for updating",f)}};
