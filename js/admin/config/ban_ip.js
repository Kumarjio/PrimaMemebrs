function myPanelOnLoad(){validator=new FormValidator();validator.add("ip","check_ip_range(val)");validator.items.ip.checkOnEvent("keyup");validator.add("reason","check_max_len(val, 254)");validator.items.reason.checkOnEvent("keyup")}function myPagerHandler(a){additional_accept=panel_after_save;on_post_error=panel_save_error;panelErrorBoxControl();displayMessageEx(false);load_panel(base_url+"config/ban_ip_list",a,{"0":base_url+"js/admin/init.js"})}function myPanelDestructor(){validator=null}function delete_ip(a){try{if(a!=""){if(confirm(temp_vars_set.are_you_sure)){var c=getPagerParams();c.action="delete";c.ip=a;myPagerHandler(c)}}else{displayMessageEx("ip_empty")}}catch(b){_sys_error("ban_ip:delete_ip","Before delete IP",b)}}function add_ip(){try{if(!validator.checkAll()){displayMessageEx("validation_fail",true)}else{var c=getPagerParams();c.action="add";var a=validator.getItems();for(key in a){if(typeof(a[key])!="function"){c[key]=a[key]}}myPagerHandler(c)}validator.setOnCheck(panelErrorBoxControl)}catch(b){_sys_error("ban_ip:add_ip","Getting fields values for adding IP",b)}};
