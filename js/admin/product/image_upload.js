ImageUploader={on_upload_success:null,on_upload_error:null,iframe_id:"img_upload_iframe",file_input_id:"p_poster",form_id:"img_upload_form",file_exts:"jpeg|jpg|gif",init_iframe:function(a){this.iframe_id=a;$("#"+this.iframe_id).bind("load",ImageUploader.iframe_loaded)},iframe_loaded:function(){try{var io=document.getElementById(ImageUploader.iframe_id);var text="";if(io.contentWindow){text=io.contentWindow.document.body?io.contentWindow.document.body.innerHTML:null}else{if(io.contentDocument){text=io.contentDocument.document.body?io.contentDocument.document.body.innerHTML:null}}var data=null;eval("data = "+text+";");if(data&&data.status&&data.error){switch(data.status){case"error":if(ImageUploader.on_upload_error){ImageUploader.on_upload_error(data.error)}break;case"success":if(ImageUploader.on_upload_success){ImageUploader.on_upload_success()}break}}}catch(e){_sys_error("product/image_upload.js::iframe_loaded","geting iframe response",e)}},check_exts:function(){var b=$("#"+this.file_input_id).val();if(b&&this.file_exts){var a="("+this.file_exts+")$";return b.search(a)!=-1}return false},check_input:function(){var a=$("#"+this.file_input_id).val();return a&&a.length?true:false},upload:function(){if(this.form_id){$("#"+this.form_id).submit()}}};
