var validator;PanelInit("table.lang_tbl");var per_page;var current_page;var per_page_const;var current_page_const;function make_hover(){$(".my_splitter").hover(function(){if($.browser.mozilla){$(".my_splitter_presenter").css({color:"#000000",backgroundColor:"#D6F0FF"});$(".my_splitter_presenter").removeClass("my_splitter_presenter")}var a=$(this).parent();a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").addClass("handpointer");a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").addClass("my_splitter_presenter");a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").css({color:"#FFFFFF",backgroundColor:"#000000"})},function(){var a=$(this).parent();a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").removeClass("handpointer");a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").removeClass("my_splitter_presenter");a.find(".my_splitter:lt("+(a.find(".my_splitter").index(this)+1)+")").css({color:"#000000",backgroundColor:"#D6F0FF"})});$(".my_splitter").click(function(){try{var b="";var h=$(this).parent();var a=$("#language_id").attr("rel");var c=$("#pp_select-1").val();h.find(".my_splitter:lt("+(h.find(".my_splitter").index(this)+1)+")").each(function(){b+=$(this).html()});if(isNaN(c)){c=5}window.filter_lang_const=b;var g={filter_str:b,lang_id:a,ppage:c};load_panel(base_url+"config/language_set",g,{"0":base_url+"js/admin/config/lang_editor.js"})}catch(f){_sys_error("My splitter","",f)}})}function ld_hover(){$(".lang_data").hover(function(){if($.browser.mozilla){$(".lang_data").css({color:"#000000",backgroundColor:"#D6F0FF"});$(".lang_data").removeClass("my_splitter_presenter")}var a=$(this).parent();a.find(".lang_data").addClass("handpointer");a.find(".lang_data").addClass("my_splitter_presenter");a.find(".lang_data").css({color:"#FF0000"});a.parent().css({border:"1px solid #22AEFF"})},function(){var a=$(this).parent();a.find(".lang_data").removeClass("handpointer");a.find(".lang_data").removeClass("my_splitter_presenter");a.find(".lang_data").css({color:"#000000",backgroundColor:"#D6F0FF"});a.parent().css({border:"1px solid #FFFFFF"})});$(".lang_data").click(function(){var a="";var b=$(this).text();var c=$(this).parent();c.find(".my_splitter").each(function(){a+=$(this).html()});$("#admin_config_lang_editor_label_name").val(a);$("#admin_config_lang_editor_label_name").attr("readonly","readonly");$("#admin_config_lang_editor_label_name").css("background-color","#02AEEF");$("#admin_config_lang_editor_label_name").css("color","#FFF");$("#admin_config_lang_editor_label_name").css("border","none");$("#admin_config_lang_editor_label_name").css("font-weight","bold");$("#lang_update").removeAttr("disabled");$("#admin_config_lang_editor_label_value_tr").removeAttr("style");$("#admin_config_lang_editor_label_value_tabs").css("display","none");$("#admin_config_lang_editor_label_value").val(b)})}function admin_config_lang_editor_find(){try{var b=$("#admin_config_lang_editor_label_name").val();var c=$("#pp_select-1").val();window.filter_lang_const=b;var g=window.filter_lang_field;var a=window.lang_editor_langID;if(isNaN(c)){c=5}var f={filter_str:b,lang_id:a,ppage:c,filter_fld:g};load_panel(base_url+"config/language_set",f,{"0":base_url+"js/admin/config/lang_editor.js"})}catch(d){_sys_error("admin_config_lang_editor_find","",d)}}function admin_config_lang_editor_clear(a){try{window.filter_lang_const="";var c={filter_str:"",lang_id:parseInt(a)};load_panel(base_url+"config/language_set",c,{"0":base_url+"js/admin/config/lang_editor.js"})}catch(b){_sys_error("admin_config_lang_editor_clear","",b)}}function admin_config_lang_editor_update(b){try{var c=$("#pp_select-1").val();var g=$("input#admin_config_lang_editor_label_name").val();var a=$("input#admin_config_lang_editor_label_value").val();if(isNaN(c)){c=5}var f={action:"update",lang_id:b,label_name:g,label_value:a,ppage:c};load_panel(base_url+"config/language_set",f,{"0":base_url+"js/admin/config/lang_editor.js"})}catch(d){_sys_error("admin_config_lang_editor_update","",d)}}function myPanelOnLoad(){try{var d=getTempVarsSet();var b=parseInt($("#language_id").attr("rel"));if(b>0){window.lang_editor_langID=b}make_hover();ld_hover();$("#admin_config_lang_editor_label_name").keypress(function(e){if(e.keyCode==13){admin_config_lang_editor_find()}});var c=$("#submit_btn"),a;$.ajax_upload(c,{action:base_url+"config/language_putXML/"+window.lang_editor_langID+"/",name:"input_lang_file",onSubmit:function(e,g){doUpload()},onSuccess:function(e){var g={status:"success",message:$("#status_ok").text()};g.status="success";g.message=$("#status_ok").text();handleResponse(g)},onError:function(g,e){var h={status:"fail",message:e};handleResponse(h)}});if(window.filter_lang_field=="content"){$("#admin_config_lang_editor_label_value_tab_label").removeClass("tab_active").addClass("tab_passive");$("#admin_config_lang_editor_label_value_tab_value").removeClass("tab_passive").addClass("tab_active")}$("#admin_config_lang_editor_label_value_tabs").find("a").click(function(){try{$("#admin_config_lang_editor_label_value_tab_label").removeAttr("class");$("#admin_config_lang_editor_label_value_tab_value").removeAttr("class");if($(this).attr("id")=="admin_config_lang_editor_label_value_tab_label"){$(this).removeClass("tab_passive").addClass("tab_active");$("#admin_config_lang_editor_label_value_tab_value").removeClass("tab_active").addClass("tab_passive");window.filter_lang_field="key_name"}if($(this).attr("id")=="admin_config_lang_editor_label_value_tab_value"){$(this).removeClass("tab_passive").addClass("tab_active");$("#admin_config_lang_editor_label_value_tab_label").removeClass("tab_active").addClass("tab_passive");window.filter_lang_field="content"}}catch(g){_sys_error("My tab","",g)}return false})}catch(f){alert("myTabOnLoad: "+f.message);_sys_error("Error:","FAIL",f)}}function admin_config_lang_editor_set_default_lang(a){try{if(a>0&&a!=parseInt(temp_vars_set.default_language)){load_panel(base_url+"config/language_list",{lang_id:a,action:"set_def_lang"},{0:base_url+"js/admin/init.js"})}return true}catch(b){_sys_error("admin_config_lang_editor_list","Generates languages list",b)}}function admin_config_lang_editor_edit_lang(c){try{var g=0;var b="edit_lang";var h="";var f="";var j="";var m=new Array;var k=new Array;var l="";var d=window.filter_lang_field;if(c){$.each(c,function(e,n){if(e=="ppage"&&!isNaN(n)){per_page_const=n;current_page_const=1}else{if(e=="cpage"){current_page_const=(n>0)?n:1}else{if(e=="lang_id"){g=(n>0)?n:0;window.lang_editor_langID=g}else{if(e=="filter_str"){if(n!=""){l=n;window.filter_lang_const=n}}else{if(e=="filter_fld"){if(n!=""){d=n;window.filter_lang_field=n}}else{if(e=="key_name"){j=(n!="")?n:""}else{if(e=="action"){if(n!=""){b=n}}}}}}}}return})}if(g<=0){return false}if(b=="new_label"){h=trim($("#admin_config_lang_editor_label_name").val());f=trim($("#admin_config_lang_editor_label_value").val());on_post_error=function(e){$("#admin_config_lang_editor_list_php_message").parent().hide();$("#admin_config_lang_editor_list_php_message_err").html(e);$("#admin_config_lang_editor_list_php_message_err").show();$("#admin_config_lang_editor_list_php_message_err").parent().show()}}if(b=="delete_key"){j=trim(j);on_post_error=function(e){$("#admin_config_lang_editor_list_php_message").parent().hide();$("#admin_config_lang_editor_list_php_message_err").html(e);$("#admin_config_lang_editor_list_php_message_err").show();$("#admin_config_lang_editor_list_php_message_err").parent().show()};on_post_success=function(){if($("#admin_config_lang_editor_list_tr_"+j)){$("#admin_config_lang_editor_list_tr_"+j).hide()}}}if(b=="set_keys"){$.each($("input:text",document.forms.admin_config_lang_editor_list_form),function(e,n){m.push($(n).attr("name"));k.push($(n).val())});on_post_error=function(e){$("#admin_config_lang_editor_list_php_message").parent().hide();$("#admin_config_lang_editor_list_php_message_err").html(e);$("#admin_config_lang_editor_list_php_message_err").show();$("#admin_config_lang_editor_list_php_message_err").parent().show()}}var a={"keys[]":m,"values[]":k,label_name:h,label_value:f,key_name:j,ppage:per_page_const,cpage:current_page_const,action:b,lang_id:g,filter_str:l,filter_fld:d};load_panel(base_url+"config/language_set",a,{"0":base_url+"js/admin/config/lang_editor.js"});document.location.hash=document.location.hash+"/"+g+"/edit"}catch(i){_sys_error("admin_config_lang_editor_edit_lang","Edit language data",i)}}function admin_config_lang_editor_add_lang(){try{load_panel(base_url+"config/language_add")}catch(a){_sys_error("admin_config_lang_editor_add_lang","Add new language",a)}}function admin_config_lang_editor_edit(a){try{var c={lang_id:a};load_panel(base_url+"config/language_set",c,{"0":base_url+"js/admin/config/lang_editor2.js"})}catch(b){_sys_error("admin_config_lang_edit","Edit lang constants",b)}}function admin_config_lang_editor_add_lang_error(a){$("#admin_config_lang_editor_add_lang_error").html(a);$("#admin_config_lang_editor_add_lang_error").parent().show();$("#admin_config_lang_editor_add_lang_error").show()}function admin_config_lang_editor_add_lang_success(a){try{after_panel_load=function(){$("#admin_config_lang_editor_list_message_add_lang_ok").parent().show();$("#admin_config_lang_editor_list_message_add_lang_ok").show()};load_panel(base_url+"config/language_list",{ppage:per_page,cpage:current_page},{0:base_url+"js/admin/init.js"})}catch(b){_sys_error("admin_config_lang_editor_add_lang_success","",b)}}function admin_config_lang_editor_delete(a){try{if(a<=0){return false}on_post_error=function(){var d=$(".mess").children("div");var c=$(".mess_err").children("div");if(d){d.each(function(f,e){$(e).hide();return})}if(c){c.each(function(f,e){$(e).hide();return})}$("#admin_config_lang_editor_list_message_delete_lang_error").parent().show();$("#admin_config_lang_editor_list_message_delete_lang_error").show()};on_post_success=function(d){var e=$(".mess").children("div");var c=$(".mess_err").children("div");if(e){e.each(function(g,f){$(f).hide();return})}if(c){c.each(function(g,f){$(f).hide();return})}$("#admin_config_lang_editor_list_message_delete_lang_ok").parent().show();$("#admin_config_lang_editor_list_message_delete_lang_ok").show();$("#admin_config_lang_editor_list_tr_"+parseInt(d)).hide()};load_panel(base_url+"config/language_delete",{action:"delete_lang",lang_id:a},{0:base_url+"js/admin/config/lang_editor.js"})}catch(b){_sys_error("admin_config_lang_editor_delete","Delete language",b)}}function admin_config_lang_editor_add(){try{var a=$("#admin_config_lang_editor_add_lang_name").val();var b=$("select#lang_default").val();on_post_error=admin_config_lang_editor_add_lang_error;on_post_success=admin_config_lang_editor_add_lang_success;load_panel(base_url+"config/language_add",{action:"add_lang",default_lang:b,lang_name:a})}catch(c){_sys_error("admin_config_lang_editor_add","Add lang",c)}}function doUpload(){block_panel();$("#status_er").parent().hide();$("#status_ok").parent().hide()}function handleResponse(a){unblock_panel();if(a.status!="success"){$("#status_er").parent().show();$("#status_er").text(a.message);$("#status_er").show()}else{if(false){$("#status_ok").parent().show();$("#status_ok").text(a.message);$("#status_ok").show()}else{window.after_redirect_message=a.message;admin_config_lang_editor_list()}}}function getIFrameXML(a){try{$("#temp_div").empty();$("#temp_div").append($("#file_upload_iframe").contents().children()[0]);load_success($("#temp_div").html())}catch(b){_sys_error("getIFrameXML","append",b)}}function admin_config_lang_editor_list(b){on_post_success=null;try{if(b){$.each(b,function(c,d){if(c=="ppage"&&!isNaN(d)){per_page=d;current_page=1}else{if(c=="cpage"){current_page=(d>0)?d:1}}return})}load_panel(base_url+"config/language_list",{ppage:per_page,cpage:current_page},{0:base_url+"js/admin/init.js"});return true}catch(a){_sys_error("admin_config_lang_editor_list","Generates languages list",a)}}function admin_config_lang_editor_translate(f){try{var a=(f>0)?f:0;var b="instruction";if(a<=0){return false}var d={action:b,lang_id:a};document.location.hash=document.location.hash+"/"+a+"/translate";load_panel(base_url+"config/language_translate",d,{"0":base_url+"js/admin/config/lang_editor.js"})}catch(c){_sys_error("admin_config_lang_editor_trans_lang","Edit language data",c)}}function lang_editor_get_XML(f){try{var a=(parseInt(f)>0)?f:0;var b="get_XML";if(a<=0){return false}var d={action:b,lang_id:a};load_panel(base_url+"config/language_translate",d,{"0":base_url+"js/admin/config/lang_editor.js","1":base_url+"js/admin/config/lang_upload.js"})}catch(c){_sys_error("admin_config_lang_editor_trans_lang","Edit language data",c)}};
