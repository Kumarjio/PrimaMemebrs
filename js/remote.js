(function(){Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){var b="";var l,j,g,k,h,f,e;var c=0;d=Base64._utf8_encode(d);while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}b=b+this._keyStr.charAt(k)+this._keyStr.charAt(h)+this._keyStr.charAt(f)+this._keyStr.charAt(e)}return b},decode:function(d){var b="";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<d.length){k=this._keyStr.indexOf(d.charAt(c++));h=this._keyStr.indexOf(d.charAt(c++));f=this._keyStr.indexOf(d.charAt(c++));e=this._keyStr.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;b=b+String.fromCharCode(l);if(f!=64){b=b+String.fromCharCode(j)}if(e!=64){b=b+String.fromCharCode(g)}}b=Base64._utf8_decode(b);return b},_utf8_encode:function(d){d=d.replace(/\r\n/g,"\n");var b="";for(var f=0;f<d.length;f++){var e=d.charCodeAt(f);if(e<128){b+=String.fromCharCode(e)}else{if((e>127)&&(e<2048)){b+=String.fromCharCode((e>>6)|192);b+=String.fromCharCode((e&63)|128)}else{b+=String.fromCharCode((e>>12)|224);b+=String.fromCharCode(((e>>6)&63)|128);b+=String.fromCharCode((e&63)|128)}}}return b},_utf8_decode:function(b){var d="";var e=0;var f=c1=c2=0;while(e<b.length){f=b.charCodeAt(e);if(f<128){d+=String.fromCharCode(f);e++}else{if((f>191)&&(f<224)){c2=b.charCodeAt(e+1);d+=String.fromCharCode(((f&31)<<6)|(c2&63));e+=2}else{c2=b.charCodeAt(e+1);c3=b.charCodeAt(e+2);d+=String.fromCharCode(((f&15)<<12)|((c2&63)<<6)|(c3&63));e+=3}}}return d}};this.nsLoginFormLoad=function(){var b=document.getElementById("ns_login_script");var c=document.createElement("script");c.src=this.baseUrl+"user/remote_login_form";b.parentNode.insertBefore(c,b)};this.nsLoginFormInsert=function(c){var b=document.getElementById("ns_login_script");var d=document.createElement("div");d.innerHTML=c;b.parentNode.insertBefore(d,b);this.nsLoginFormInit()};this.nsLoginFormInit=function(){var l=document.location.search;l=(l.indexOf("?")===0)?l.substr(1):l;l=l.split("&");var g={};for($key in l){if(l[$key].indexOf("ns_")==0){var k=l[$key].substr(3);k=k.split("=");g[k.shift()]=k.join("=")}}try{var b=new Array("login","error_text","suspended","blocked","banned");for($key in b){$val=b[$key];if(typeof(g[$val])!="undefined"){g[$val]=Base64.decode(g[$val])}}if(typeof(document.forms.ns_login_form)!="undefined"){var j=document.forms.ns_login_form;if(typeof(g.login)!="undefined"){j.elements.login.value=g.login}if(typeof(g.red_url)!="undefined"){j.elements.red_url.value=g.red_url}if(typeof(g.show_capcha)!="undefined"&&g.show_capcha=="1"){var i=document.getElementById("ns_capcha_row");i.style.display=""}if(typeof(g.show_remember_field)!="undefined"&&g.show_remember_field=="1"){var h=document.getElementById("ns_remember_title");h.style.display="";var f=document.getElementById("ns_remember_input");f.style.display=""}if(typeof(g.error_text)!="undefined"){if(document.getElementById("ns_error_div")){var d=document.getElementById("ns_error_div");d.innerHTML=g.error_text}else{alert(g.error_text)}}}}catch(c){if(typeof(g.test)!="undefined"){alert(c)}}};this.addEvent=function(f,e,c,b){if(f.addEventListener){f.addEventListener(e,c,b);return true}else{if(f.attachEvent){var d=f.attachEvent("on"+e,c);return d}else{f["on"+e]=c}}};var a=this;this.addEvent(window,"load",function(){a.baseUrl="";var c=document.getElementById("ns_login_script");var b=c.src;a.baseUrl=b.substring(0,b.indexOf("js/remote.js"));if(typeof(document.forms.ns_login_form)=="undefined"){a.nsLoginFormLoad()}else{a.nsLoginFormInit()}},false);window.nsLoginFormObject=this})();
