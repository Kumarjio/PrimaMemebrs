var validator;var selector;function myPanelOnLoad(){try{validator=new FormValidator();selector=new multiSelector();validator.add("admin_email","check_mail(val)&&check_max_len(val, 512)");validator.items.admin_email.checkOnEvent("keyup");validator.add("mailer_charset","check_min_len(val, 3)&&check_max_len(val, 15)");validator.items.mailer_charset.checkOnEvent("keyup");validator.add("mailer_in_html");validator.add("mailer_use_smtp");validator.add("mailer_smtp_host","check_max_len(val, 1024)&&(check_url(val)||check_ip(val))");validator.items.mailer_smtp_host.checkOnEvent("keyup");validator.add("mailer_smtp_port","check_int(val)&&check_int_limit(val, 65535, 0)");validator.items.mailer_smtp_port.checkOnEvent("keyup");validator.add("mailer_use_auth");validator.add("mailer_smtp_user","check_max_len(val, 254)||!val");validator.items.mailer_smtp_user.checkOnEvent("keyup");validator.add("mailer_smtp_pass","check_max_len(val, 254)||!val");validator.items.mailer_smtp_pass.checkOnEvent("keyup");validator.add("send_to_count","check_int(val)&&check_int_limit(val, 65535, 1)");validator.items.send_to_count.checkOnEvent("keyup");validator.checkAll()}catch(a){alert("myTabOnLoad: "+a.message);_sys_error("Error:","FAIL",a)}}function myPanelDestructor(){validator=null;selector=null}function mailer_settings_save(c,b){try{if(b){if(confirm(temp_vars_set.cancelText)){var f={action:""};load_panel(c,f,{"0":base_url+"js/admin/init.js"})}}else{displayMessageEx();if(!validator.checkAll()){displayMessageEx("validation_fail",true);validator.setOnCheck(panelErrorBoxControl)}else{var f={action:"save"};var a=validator.getItems();for(key in a){if(typeof(a[key])!="function"){f[key]=a[key]}}on_post_error=panel_save_error;additional_accept=panel_after_save;load_panel(c,f,{"0":base_url+"js/admin/init.js"})}}}catch(d){alert("Mailer_settings_save: "+d.message);_sys_error("Error:","FAIL",d)}};
