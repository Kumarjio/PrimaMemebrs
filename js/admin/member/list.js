function myPanelOnLoad(){set_dp();on_post_error=save_error;additional_accept=after_save}function myPagerHandler(a){load_panel(base_url+"member/member_list/",a,{"0":base_url+"js/admin/init.js"})}function myPanelDestructor(){}function after_save(b){var a=getTempVarsSet(false,b);displayMessageEx(a)}function save_error(b){var a=getTempVarsSet(false,b);displayMessageEx(a,true)}function set_date_period(){try{$("#date_from").val("");$("#date_to").val("");var c=null;var a=null}catch(b){_sys_error("list:set_date_period","Changing date attributes",b)}}function after_load_member_list_error(a){if(a!=""){_error_panel_show(a)}}function load_member_list(f){var i=0;var a=false;var h=false;try{if(f){$.each(f,function(e,j){if(e=="ppage"&&!isNaN(j)){per_page=j;current_page=1}else{if(e=="cpage"){current_page=(j>0)?j:1}else{if(e=="ord"){sort_by=j;sort_how=(sort_how=="asc")?"desc":"asc"}else{if(e=="letter"){search_letter=f.letter}else{if(e=="is_search"){is_search=f.is_search;current_page=1}else{if(e=="is_oper"){a=f.is_oper;current_page=1}else{if(e=="is_icon"){h=f.is_icon;icon_id=f.icon_id;icon_type=f.icon_type}}}}}}}return})}if(is_search){if(search_letter==""||!search_letter){if($("#search_by_val").length){if($("#search_by_val").val()!=""){search_by_key=$("#search_by_key").val();search_by_val=$("#search_by_val").val()}else{search_by_key=null;search_by_val=null}}if($("#date_from").length&&$("#date_period").length){if($("#date_from").val()!=""){if(!compare_dates($("#date_from").val(),$("#date_to").val())){return false}search_date_from=$("#date_from").val();search_date_to=$("#date_to").val();search_date_period=null}else{search_date_period=$("#date_period option:selected").val();search_date_from=null;search_date_to=null}}if($("#search_by_val").length&&!search_by_val&&!search_date_from&&!search_date_period){is_search=false;return false}$("#search_by_status option:selected").each(function(){i=$(this).val()+" "})}var c={is_search:true,letter:search_letter,search_key:search_by_key,search_val:search_by_val,date_from:search_date_from,date_to:search_date_to,date_period:search_date_period,search_status:i};if(a==true){var b=_get_selected_members();if(b==""){$("#jsvalid_error_mbr_notchecked").show();$("#error_panel").show();return false}c.mbrlist=b;c.is_oper=a;$("#do_by_status option:selected").each(function(){do_by_status=$(this).val()+" "});c.do_by_status=do_by_status;$("#sreason_id option:selected").each(function(){sreason_id=$(this).val()+" "});c.sreason_id=sreason_id}if(h==true){c.sreason_id="do_status_suspend";c.do_by_status=icon_type+" ";c.is_oper=true;c.mbrlist=icon_id+"!"}}var g={cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how};if(c){g=$.extend(g,c)}moveSlideTab(2,2,"member_list");on_post_error=after_load_member_list_error;load_panel(base_url+"member/member_list",g,{"0":base_url+"js/admin/init.js"})}catch(d){_sys_error("list:load_member_list","Generates members list",d)}}function after_delete_member_success(c){try{_msg_panel_hide();_error_panel_hide();msg=c;after_panel_load=after_panel_loaded;var b={cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how};load_panel(base_url+"member/member_list",b);redesign()}catch(a){_sys_error("list:after_delete_member_success","Loading member list after delete",a)}}function after_delete_member_error(a){try{_msg_panel_hide();if(a!=""){_error_panel_show(a)}}catch(b){_sys_error("list:after_delete_member_error","Displayes error after member delete",b)}}function delete_member(b){try{if(parseInt(b)>0){var a=$("#delete_question").text();if(confirm(a)){var d={mbrlist:b+"!"};on_post_success=after_delete_member_success;on_post_error=after_delete_member_error;load_panel(base_url+"member/delete_user/",d)}}}catch(c){_sys_error("list:delete_member","Checks member id before delete a member",c)}}function serchByKeyChange(a){if($(a).val()=="group"){$("#search_by_val").val($("#member_group").val());$("#search_by_val").hide();$("#member_group").show()}else{$("#search_by_val").val("");$("#member_group").hide();$("#search_by_val").show()}}function memberGroupChange(a){$("#search_by_val").val($("#member_group").val())}function operChange(b,a){stat=$("#do_by_status").val();if(stat=="do_status_suspend"){$("#status_reason").css("display","")}else{$("#status_reason").css("display","none")}switch(stat){case"do_status_approve":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){if(a){return $("#tool_tip_approve").html()+$("#tool_tip_system_is_approval").html()}else{return $("#tool_tip_approve").html()+$("#tool_tip_system_is_disapproval").html()}},showURL:false});break;case"do_status_notapprove":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){if(a){return $("#tool_tip_disapprove").html()+$("#tool_tip_system_is_approval").html()}else{return $("#tool_tip_disapprove").html()+$("#tool_tip_system_is_disapproval").html()}},showURL:false});break;case"do_status_unsuspend":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){return $("#tool_tip_unsuspend").html()},showURL:false});break;case"do_status_suspend":$("#status_reason").css("display","");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){return $("#tool_tip_suspend").html()},showURL:false});break;case"do_status_notactivate":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){if(b){return $("#tool_tip_inactivate").html()+$("#tool_tip_system_is_activate").html()}else{return $("#tool_tip_inactivate").html()+$("#tool_tip_system_is_inactivate").html()}},showURL:false});break;case"do_status_activate":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){if(b){return $("#tool_tip_activate").html()+$("#tool_tip_system_is_activate").html()}else{return $("#tool_tip_activate").html()+$("#tool_tip_system_is_inactivate").html()}},showURL:false});break;case"do_status_deleted":$("#status_reason").css("display","none");$("#operation_form span.tooltip_area").tooltip({bodyHandler:function(){return $("#tool_tip_delete").html()+$("#tool_tip_system_is_activate").html()},showURL:false});break}}function memberAction(d){on_post_message=successMessage;var f={action:"click"};f.type=b;f.id=g;f.status=$("#img_"+b+"_"+g+":visible").length;var i=0;var a=false;var h=false;var b=false;var g=false;try{if(d){$.each(d,function(e,j){if(e=="img_name"&&!isNaN(j)){b=d.img_name}else{if(e=="icon_id"&&!isNaN(j)){g=d.icon_id}}return})}$("#img_"+b+"_"+g).toggle();$("#img_un_"+b+"_"+g).toggle();load_member_list(d)}catch(c){_sys_error("list:load_member_list","Generates members list",c)}};
