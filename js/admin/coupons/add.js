function after_add_coupons_success(c){msg=c;after_panel_load=after_panel_loaded;try{var b={cpage:current_page,ppage:per_page,ord:sort_by,ord_type:sort_how};moveSlideTab(5,1,"coupon_groups");load_panel(base_url+"coupons/coupons_list",b)}catch(a){_sys_error("add:after_add_coupons_success","Getting pager params for coupons group list",a)}}function after_add_coupons_error(a){if(a!=""){_error_panel_show(a)}}function add_coupons(){_msg_panel_hide();_error_panel_hide();try{var l=$("#coupons_name").val();var g=$("#coupons_count").val();var m=$("#use_count").val();var c=$("#mbr_use_count").val();var d=$("#code_len").val();var p=$("#discount_val").val();var a=$("#discount_type").val();var j=$("#descr").val();var i=""+$("#products").val();if(i!="null"){i=i.replace(/[,]/g,"!")}else{i=""}var n=0;if($("#locked").attr("checked")==true){n=1}var f={name:l,descr:j,coupons_count:g,per_user_use:c,coupon_use:m,code_len:d,discount_val:p,discount_type:a,locked:n,products:i,action:"add"};var q=0;if($("#no_dates_limit").attr("checked")==true){q=1}else{var o=$("#start_date").val();var b=$("#end_date").val();if(!check_date(o)||!check_date(b)){$("#jsvalid_error_date_wrong").show();$("#error_panel").show();return false}if(!compare_dates(o,b)){$("#jsvalid_error_dates_compare").show();$("#error_panel").show();return false}var h={start_date:o,end_date:b};f=jQuery.extend(f,h)}f=jQuery.extend(f,{donot_limit_dates:q});if(_validate_coupons_fields(f)){on_post_success=after_add_coupons_success;on_post_error=after_add_coupons_error;load_panel(base_url+"coupons/add",f)}}catch(k){_sys_error("add:add_coupons","Getting form fields values",k)}};
