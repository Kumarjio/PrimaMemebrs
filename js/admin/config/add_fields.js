function myPanelOnLoad(){$("#add_fields").tableDnD({onDrop:function(a,b){$(b).removeClass("light");$(b).addClass("dark");resortRow(a,b)},onDragStart:function(a,b){$(b).removeClass("dark");$(b).addClass("light")}})}var last_sort_img;function resortRow(c,e){var a=new Array();var f=$(c).find("tbody").find("tr").each(function(g,h){a.push(h.id.split("_")[1])});var b=a.join(",");if(b!=last_sort_img){last_sort_img=b;on_post_message=successMessage;var d={action:"sort"};last_sort_img=a.join(",");d.pos=last_sort_img;load_message(base_url+"config/add_fields_sort/",d)}}function successMessage(b){var a;a=getTempVarsSet(a,b);if(a.type=="sort"){if(a.pos==last_sort_img){messageFade("success_message",false,false,true)}}if(a.type=="remove"&&a.result=="true"){$("tr#field_"+a.id).remove();messageFade("success_delete",false,false,true)}return 1}function myPanelDestructor(){}function fieldEdit(a){document.location.hash=document.location.hash+"/"+a+"/edit";load_panel(base_url+"config/add_field_edit",{id:a},{"0":base_url+"js/admin/init.js"})}function fieldAdd(){document.location.hash=document.location.hash+"/add";load_panel(base_url+"config/add_fields_add",{},{"0":base_url+"js/admin/init.js"})}function fieldDelete(a){if(confirm(temp_vars_set.are_you_sure)){on_post_error=panel_save_error;on_post_message=successMessage;load_message(base_url+"config/add_field_remove",{id:a})}}var success_message=new String();var admin_config_sort_order="asc";var admin_config_sort_by="name";function admin_config_change_sort(a){if(trim(a)!=""){if(a==admin_config_sort_by){if(admin_config_sort_order=="asc"){admin_config_sort_order="desc"}else{admin_config_sort_order="asc"}}else{admin_config_sort_by=a;admin_config_sort_order="asc"}}load_panel(base_url+"config/add_fields",{sort_by:admin_config_sort_by,sort_order:admin_config_sort_order})}function admin_config_remove_field_request(a,b){on_post_error=admin_config_remove_field_error;on_post_success=admin_config_add_field_success;load_panel(a,{id:b})}function admin_config_remove_field_error(a){$("#admin_config_add_fields_error_message").html(a);$("#admin_config_add_fields_error_message").parent().show();$("#admin_config_add_fields_error_message").show()}function admin_config_add_field_request(a){on_post_error=admin_config_add_field_error;on_post_success=admin_config_add_field_success;var f=0;try{$("#admin_config_add_fields_errors_area").hide();$("#admin_config_add_fields_title_error").hide();var g=$("#admin_config_add_fields_title").val();if(trim(g)==""){f++;$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_title_error").show()}var k=$("#admin_config_add_fields_field_type").val();if(trim(k)==""){f++;$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_field_type_error").show()}var d=$("#admin_config_add_fields_field_values").val();if(k!=1&&k!=4){if(trim(d)==""){f++;$("#admin_config_add_fields_errors_area").show();$("#jserror_field_values_empty").show()}}var j=$("#admin_config_add_fields_default_value").val();if(trim(j)==""){f++;$("#admin_config_add_fields_errors_area").show();$("#jserror_default_value_empty").show()}}catch(c){_sys_error("admin_config_add_field_reqest","get param list error",c)}var i=$("#admin_config_add_fields_description").val();if($("#admin_config_add_fields_required_mark").attr("checked")){var h=$("#admin_config_add_fields_required_mark").val()}else{var h=0}var b=$("#admin_config_add_fields_check_rule").val();if(f<=0){load_panel(a,{title:g,description:i,field_type:k,required_mark:h,field_values:d,default_value:j,check_rule:b,action:"add"})}else{}}function admin_config_add_field_success(a){success_message=a;after_panel_load=show_message_after_panel_load;load_panel(base_url+"config/add_fields",{sort_by:admin_config_sort_by,sort_order:admin_config_sort_order})}function show_message_after_panel_load(){$("#admin_config_add_fields_success_message").html(success_message);$("#admin_config_add_fields_success_message").parent().show();$("#admin_config_add_fields_success_message").show()}function admin_config_add_field_error(a){$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_add_error").html(a);$("#admin_config_add_fields_add_error").show()}function admin_config_edit_field_request(a){on_post_error=admin_config_edit_field_error;on_post_success=admin_config_edit_field_success;var g=0;try{$("#admin_config_add_fields_errors_area").hide();$("#admin_config_add_fields_title_error").hide();$("#admin_config_add_fields_field_type_error").hide();var h=$("#admin_config_add_fields_title").val();if(trim(h)==""){g++;$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_title_error").show()}var l=$("#admin_config_add_fields_field_type").val();if(trim(l)==""){g++;$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_field_type_error").show()}}catch(d){_sys_error("admin_config_add_field_reqest","get param list error",d)}var j=$("#admin_config_add_fields_description").val();if($("#admin_config_add_fields_required_mark").attr("checked")){var i=$("#admin_config_add_fields_required_mark").val()}else{var i=0}var f=$("#admin_config_add_fields_field_values").val();var k=$("#admin_config_add_fields_default_value").val();var c=$("#admin_config_add_fields_check_rule").val();var b=$("#admin_config_add_fields_id").val();if(g<=0){load_panel(a,{id:b,title:h,description:j,field_type:l,required_mark:i,field_values:f,default_value:k,check_rule:c,action:"edit"})}else{}}function admin_config_edit_field_success(a){success_message=a;after_panel_load=show_message_after_panel_load;load_panel(base_url+"config/add_fields",{sort_by:admin_config_sort_by,sort_order:admin_config_sort_order})}function admin_config_edit_field_error(a){$("#admin_config_add_fields_errors_area").show();$("#admin_config_add_fields_add_error").html(a);$("#admin_config_add_fields_add_error").show()};
