var validator;function myPanelOnLoad(){try{styles=new Array();styles[0]="style='color: red; font-size:xx-small;'";styles[3]="style='color: #FF9900; font-size:xx-small;'";styles[4]="style='color: #FDD72C; font-size:xx-small;'";styles[5]="style='color: #00CC00; font-size:xx-small;'";styles[6]="style='color: green; font-size:xx-small;'";temp_vars_set.styles=styles;validator=new FormValidator();validator.add("login","check_max_len(val, 32)&&check_admin_login(val)&&val");validator.items.login.checkOnEvent("keyup");validator.items.login.checkOnServer(base_url+"admin_control/value_exist/",{id:temp_vars_set.id},"blur");validator.add("pwd");validator.items.pwd.checkOnEvent("keyup",myPwdCheck);validator.add("email","check_mail(val)&&val");validator.items.email.checkOnEvent("keyup");validator.items.email.checkOnServer(base_url+"admin_control/value_exist/",{id:temp_vars_set.id},"blur");validator.add("pwd_ret");validator.items.pwd_ret.checkOnEvent("keyup",myPwdRetCheck);validator.add("pwd_gen");validator.items.pwd_gen.checkOnEvent("click",passwordGenerate);validator.add("access_id");if(temp_vars_set.is_edit=="true"){validator.checkAll();passwordGenerate()}}catch(a){alert("myTabOnLoad: "+a.message);_sys_error("Error:","FAIL",a)}}function myPwdCheck(){if(!validator.items.pwd_gen.value&&(temp_vars_set.is_edit=="false"||validator.items.pwd.value!="")){var a=check_admin_pwd(validator.items.pwd.value);a=a>2?a:0;validator.items.pwd.error.is_error=a>3?false:true;validator.items.pwd.showError(temp_vars_set["password_protection"+a],temp_vars_set.styles[a],validator.items.pwd.error.is_error);if(!validator.items.pwd.error.is_error){myPwdRetCheck();$("tr.pwd_ret_block").show();return}}else{validator.items.pwd.showError(false)}validator.items.pwd_ret.setValue("");$("tr.pwd_ret_block").hide()}function myPwdRetCheck(){if(!validator.items.pwd_gen.value){if(validator.items.pwd.value==validator.items.pwd_ret.value){validator.items.pwd_ret.showError(temp_vars_set.password_is_match,temp_vars_set.styles[5],false);validator.items.pwd_ret.error.is_error=false}else{validator.items.pwd_ret.showError(temp_vars_set.password_not_match,temp_vars_set.styles[0],true);validator.items.pwd_ret.error.is_error=true}}}function passwordGenerate(){if(validator.items.pwd_gen.value){validator.items.pwd.setValue("");validator.items.pwd_ret.setValue("");validator.items.pwd.error.is_error=false;validator.items.pwd_ret.error.is_error=false;$("tr.pwd_block").hide();$("tr.pwd_ret_block").hide()}else{myPwdCheck();$("tr.pwd_block").show()}}function myPanelDestructor(){validator=null}function myOnSave(g,c){try{var d=base_url+"admin_control/";params=getPagerParams();if(temp_vars_set.from_header=="true"){params.from_header=true}if(c){if(confirm(temp_vars_set.cancelText)){if(temp_vars_set.from_header=="true"){load_home()}else{moveSlideTab(7,2,"administrator_list");load_panel(d+"admin_list/",params,{"0":base_url+"js/admin/init.js"})}}}else{displayMessageEx();myPwdCheck();myPwdRetCheck();if(validator.items.pwd.error.is_error||validator.items.pwd_ret.error.is_error||validator.items.login.error.is_error||validator.items.email.error.is_error||!validator.checkAll()){var b=new Array();b.push("validation_fail");displayMessageEx(b,true)}else{params.action="save";var a=validator.getItems();a.id=g;for(key in a){if(typeof(a[key])!="function"){params[key]=a[key]}}on_post_error=panel_save_error;additional_accept=after_save;on_post_message=after_save;load_panel(d+"admin_edit/",params,{"0":base_url+"js/admin/init.js"})}validator.setOnCheck(panelErrorBoxControl)}}catch(f){alert("myOnSave: "+f.message);_sys_error("Error:","FAIL",f)}}function after_save(b){var a=getTempVarsSet(false,b);delete (a.login);delete (a.email);moveSlideTab(7,2,"administrator_list");displayMessageEx(a)};
