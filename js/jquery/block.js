(function(a){a.blockUI=function(c,b){a.blockUI.impl.install(window,c,b)};a.unblockUI=function(){a.blockUI.impl.remove(window)};a.fn.block=function(c,b){return this.each(function(){if(!this.$pos_checked){if(a.css(this,"position")=="static"){this.style.position="relative"}if(a.browser.msie){this.style.zoom=1}this.$pos_checked=1}a.blockUI.impl.install(this,c,b)})};a.fn.unblock=function(){return this.each(function(){a.blockUI.impl.remove(this)})};a.blockUI.defaults={pageMessage:"<h1>Please wait...</h1>",elementMessage:"",overlayCSS:{backgroundColor:"#fff",opacity:"0.5"},pageMessageCSS:{width:"250px",margin:"-50px 0 0 -125px",top:"50%",left:"50%",textAlign:"center",color:"#000",backgroundColor:"#fff",border:"3px solid #aaa"},elementMessageCSS:{width:"250px",padding:"10px",textAlign:"center",backgroundColor:"#fff"},ie6Stretch:1};a.blockUI.impl={pageBlock:null,op8:window.opera&&window.opera.version()<9,ffLinux:a.browser.mozilla&&/Linux/.test(navigator.platform),ie6:a.browser.msie&&typeof XMLHttpRequest=="function",install:function(c,d,h){var j=(c==window),q=this.op8||this.ffLinux;if(j&&this.pageBlock){this.remove(window)}if(d&&typeof d=="object"&&!d.jquery&&!d.nodeType){h=d;d=null}d=d?(d.nodeType?a(d):d):j?a.blockUI.defaults.pageMessage:a.blockUI.defaults.elementMessage;var r=jQuery.extend({},j?a.blockUI.defaults.pageMessageCSS:a.blockUI.defaults.elementMessageCSS);h=jQuery.extend(r,h||{});var i=(a.browser.msie)?a('<iframe class="blockUI" style="z-index:1000;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="javascript:false;document.write(\'\');"></iframe>'):a('<div class="blockUI" style="display:none"></div>');var o=a('<div class="blockUI" style="z-index:1001;cursor:wait;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var e=j?a('<div class="blockUI blockMsg" style="z-index:1002;cursor:wait;padding:0;position:fixed"></div>'):a('<div class="blockUI" style="display:none;z-index:1002;cursor:wait;position:absolute"></div>');o.css("position",j?"fixed":"absolute");if(d){e.css(h)}if(!q){o.css(a.blockUI.defaults.overlayCSS)}if(this.op8){o.css({width:""+c.clientWidth,height:""+c.clientHeight})}if(a.browser.msie){i.css("opacity","0.0")}a([i[0],o[0],e[0]]).appendTo(j?"body":c);if(j){this.pageBlock=e[0]}var n=a.browser.msie&&(!a.boxModel||a("object,embed",j?null:c).length>0);if(this.ie6||n){if(j&&a.blockUI.defaults.ie6Stretch&&a.boxModel){a("html,body").css("height","100%")}if((this.ie6||!a.boxModel)&&!j){var p=this.sz(c,"borderTopWidth"),g=this.sz(c,"borderLeftWidth");var k=p?"(0 - "+p+")":0;var b=g?"(0 - "+g+")":0}a.each([i,o,e],function(f,m){var l=m[0].style;l.position="absolute";if(f<2){j?l.setExpression("height",'document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + "px"'):l.setExpression("height",'this.parentNode.offsetHeight + "px"');j?l.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):l.setExpression("width",'this.parentNode.offsetWidth + "px"');if(b){l.setExpression("left",b)}if(k){l.setExpression("top",k)}}else{if(j){l.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}l.marginTop=0}})}this.bind(1,c);e.append(d).show();if(d.jquery){d.show()}j?setTimeout(this.focus,200):this.center(e[0])},remove:function(c){this.bind(0,c);var b=c==window;if(b){a("body").children().filter(".blockUI").remove();this.pageBlock=null}else{a(".blockUI",c).remove()}},handler:function(b){if(b.keyCode&&b.keyCode==9){return true}if(a(b.target).parents("div.blockMsg").length>0){return true}return a(b.target).parents().children().filter("div.blockUI").length==0},bind:function(c,f){var e=f==window;if(!c&&(e&&!this.pageBlock||!e&&!f.$blocked)){return}if(!e){f.$blocked=c}var d=e?a():a(f).find("a,:input");a.each(["mousedown","mouseup","keydown","keypress","keyup","click"],function(b,g){d[c?"bind":"unbind"](g,a.blockUI.impl.handler)})},focus:function(){if(!a.blockUI.impl.pageBlock){return}var b=a(":input:visible:enabled",a.blockUI.impl.pageBlock)[0];if(b){b.focus()}},center:function(e){var f=e.parentNode,d=e.style;var b=((f.offsetWidth-e.offsetWidth)/2)-this.sz(f,"borderLeftWidth");var c=((f.offsetHeight-e.offsetHeight)/2)-this.sz(f,"borderTopWidth");d.left=b>0?(b+"px"):"0";d.top=c>0?(c+"px"):"0"},sz:function(b,c){return parseInt(a.css(b,c))||0}}})(jQuery);
