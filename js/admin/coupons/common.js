var error=null;var msg=null;var tab_bg_clr=null;var is_search=false;var search_letter=null;var search_by_key=null;var search_by_val=null;var search_date_from=null;var search_date_to=null;var search_date_period=null;var current_page=1;var per_page=5;var sort_by="begin_date";var sort_how="desc";function hide_dates(){try{if($("#no_dates_limit").attr("checked")==true){$("#limit_dates").hide()}else{$("#limit_dates").show()}}catch(a){_sys_error("common:hide_dates","Hides or shows dates fields",a)}}function _set_menu_cursor(b,a){$(prev_cursor).css("visibility","hidden");prev_cursor="#cursor_"+b+"_"+a;$(prev_cursor).css("visibility","visible")}function _validate_coupons_fields(b){var c=true;try{$("div#error_panel").children(".box_err").hide();$.each(b,function(e,f){if(e=="name"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if(!check_max_len(f,254)){$("#jsvalid_error_name_toolong").show();$("#error_panel").show();c=false;return}}}else{if(e=="descr"){if(!check_max_len(f,65534)){$("#jsvalid_error_descr_toolong").show();$("#error_panel").show();c=false;return}}else{if(e=="coupons_count"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if(parseInt(f)<1||isNaN(f)){$("#jsvalid_error_coupons_count_wrong").show();$("#error_panel").show();c=false;return}}}else{if(e=="per_user_use"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if(parseInt(f)<1||isNaN(f)){$("#jsvalid_error_per_user_use_wrong").show();$("#error_panel").show();c=false;return}}}else{if(e=="coupon_use"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if(parseInt(f)<1||isNaN(f)){$("#jsvalid_error_coupon_use_wrong").show();$("#error_panel").show();c=false;return}}}else{if(e=="code_len"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if(parseInt(f)<5||isNaN(f)){$("#jsvalid_error_code_len_wrong").show();$("#error_panel").show();c=false;return}}}else{if(e=="discount_type"){if(f!="prc"&&f!="val"){$("#jsvalid_error_discount_type_wrong").show();$("#error_panel").show();c=false;return}}else{if(e=="discount_val"){if(f==""){$("#jsvalid_error_fields_empty").show();$("#error_panel").show();c=false;return}else{if((parseInt(f)<1||isNaN(f))&&b.discount_type=="prc"){$("#jsvalid_error_discount_val_wrong").show();$("#error_panel").show();c=false;return}}}else{if(e=="donot_limit_dates"){if(parseInt(f)!=1&&parseInt(f)!=0){$("#jsvalid_error_dont_use_time_limit_wrong").show();$("#error_panel").show();c=false;return}}else{if(e=="locked"){if(parseInt(f)!=1&&parseInt(f)!=0){$("#jsvalid_error_locked_wrong").show();$("#error_panel").show();c=false;return}}else{if(e=="products"){var d=f.split("!");if(f.length<1){$("#jsvalid_error_products_wrong").show();$("#error_panel").show();c=false;return}}}}}}}}}}}}})}catch(a){_sys_error("common:validate_coupons_fields","Coupons Group add,edit form fields",a)}return c}function set_dp(){$("#date_from").bind("change",set_dp_limit);$("#date_from").bind("blur",set_dp_limit);$("#date_from").bind("select",set_dp_limit)}function set_dp_limit(){var c=datePickerController.datePickers.date_from.date;c.setDate(c.getDate()+1);c.getDate();var a=c.getMonth().toString().length<2?"0"+(c.getMonth()+1):(c.getMonth()+1);var b=c.getDate().toString().length<2?"0"+(c.getDate()):(c.getDate());datePickerController.datePickers.date_to.setRangeLow(c.getFullYear()+a+b);c=new Date();var a=c.getMonth().toString().length<2?"0"+(c.getMonth()+1):(c.getMonth()+1);var b=c.getDate().toString().length<2?"0"+(c.getDate()):(c.getDate());datePickerController.datePickers.date_to.setRangeHigh(c.getFullYear()+a+b)};
